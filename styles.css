/* Screenplay Formatting Styles */

.script-scene,
.script-character,
.script-dialogue,
.script-parenthetical,
.script-transition,
.script-action {
    color: var(--text-normal) !important;
}

/* Scene Heading: . */
.script-scene {
    font-weight: bold !important;
    text-transform: uppercase;
    text-align: left !important;
    margin-top: 2em !important;
    margin-bottom: 1em !important;
    /* display: list-item !important;  <-- REMOVED: 避免在非列表的 p 元素上出現黑點 */

    border-bottom: none !important;
    /* 避免 h1-h6 的預設底線 */
    /* 懸掛縮排：如果場景標題太長，第二行對齊文字而不是編號 */
    padding-left: 0 !important;

}

/* 針對 Obsidian 列表的特定修正 */
li.script-scene {
    margin-top: 2em !important;
    /* 列表項目的 margin 有時候會被吃掉，強制加強 */
    /* display: list-item !important; */
    /* li 本身就是 list-item，這裡強調一下無妨，或是也不需要 */
}

li.script-scene::marker {
    font-weight: bold !important;
    /* 嘗試讓編號也變粗 */
}

/* Character: @ */
.script-character {
    text-transform: uppercase;
    text-align: center !important;
    padding-left: 0 !important;
    margin-left: 20% !important;
    margin-right: 20% !important;
    /* margin-top: 1.0em !important; */
    margin-bottom: 0px !important;
    padding-bottom: 0px !important;
    display: block !important;
    /* font-weight: bold !important; */
}

/* Dialogue: : or ： */
/* 螢幕閱讀模式：使用較寬的縮排 (20%) 以保持劇本感 */
.script-dialogue {
    text-align: justify !important;
    margin-left: 18% !important;
    margin-right: 18% !important;
    margin-top: 0px !important;
    margin-bottom: 1em !important;
    display: block !important;
    white-space: pre-wrap !important;
}

/* Parenthetical: ( */
.script-parenthetical {
    /* text-align: center !important; */
    margin-left: 18% !important;
    margin-right: 18% !important;
    margin-bottom: 0px !important;
    font-style: italic !important;
    display: block !important;
    color: var(--text-muted) !important;
}

/* Transition: CUT TO: etc. */
.script-transition {
    text-align: right !important;
    text-transform: uppercase;
    margin-top: 1.5em !important;
    margin-bottom: 1em !important;
    display: block !important;
    margin-right: 1em !important;
    color: var(--text-normal) !important;
}

/* PDF Export / Print Settings */
@media print {

    .script-character {
        text-align: center !important;
    }

    .script-dialogue {
        margin-left: 10% !important;
        margin-right: 10% !important;
        /* 強制防呆：確保對白不會變成粗體 */
        font-weight: normal !important;
    }

    .script-parenthetical {
        margin-left: 10% !important;
        margin-right: 10% !important;
    }
}

/* 針對 Reading View 的修正 */
.markdown-preview-view p.script-character {
    background-color: transparent !important;
    /* 防止被 highlight 干擾 */
}

/* ==========================================================================
   Live Preview (Editing Mode) Styles
   Prefix: .lp- (Live Preview)
   Purpose: Separate styling for the editor to ensure stability and editability.
   ========================================================================== */

.lp-scene {
    font-weight: bold !important;
    text-transform: uppercase;
    color: var(--text-normal) !important;
    /* 編輯模式通常不需要過大的上下 margin，以免游標跳動 */
}

.lp-character {
    /* font-weight: bold !important; */
    text-transform: uppercase;
    text-align: center !important;
    color: var(--text-normal) !important;
    /* 不使用大 margin，避免編輯困難，改用 padding 或維持原狀 */
}

.lp-dialogue {
    /* 編輯時保持靠左或些微縮排即可 -> 改為 10% 以接近閱讀模式 */
    padding-left: 10% !important;
    padding-right: 10% !important;
    text-align: justify !important;
    color: var(--text-normal) !important;
}

.lp-parenthetical {
    font-style: italic !important;
    color: var(--text-muted) !important;
    padding-left: 10% !important;
    padding-right: 10% !important;
    /* text-align: center !important; */
}

.lp-transition {
    text-align: right !important;
    text-transform: uppercase;
    color: var(--text-normal) !important;
}

/* 讓編輯模式的符號（如 @）在非編輯狀態下隱藏 */
.lp-marker-symbol {
    color: transparent !important;
    font-size: 1px !important;
    /* 不完全為 0 以避免高度塌陷問題 */
    letter-spacing: -1ch;
    /* 嘗試縮減寬度 */
}

/* ==========================================================================
   Header Styling (H1 Centering)
   Only applies to fountain/script notes
   ========================================================================== */

/* Reading Mode */
.markdown-preview-view.fountain h1,
.markdown-preview-view.script h1 {
    text-align: center !important;
}

/* Live Preview (Editing Mode) */
/* 使用 .HyperMD-header-1 確保選中整行 */
.markdown-source-view.fountain .HyperMD-header-1,
.markdown-source-view.script .HyperMD-header-1 {
    text-align: center !important;
}